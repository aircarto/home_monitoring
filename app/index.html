<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Monitoring</title>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<style>

#container{
    height: 647px;
    width: 900px;
    background-image: url( './img/plan.png' );
}

</style>
</head>
<body>
    <div id="container"></div>
    <script type="module">

// const moduleairs = d3.request("https://aircarto.fr/API_V2/capteurs/metadata?capteurType=ModuleAir")
//     .mimeType("application/json")
//     .response(function(xhr) { return JSON.parse(xhr.responseText); })
//     .get(callback);


//     d3.fetch("https://aircarto.fr/API_V2/capteurs/metadata?capteurType=ModuleAir")
// .header("Content-Type", "application/json")
// .get(function(data) {
//    console.log(data);
// })

// const moduleairs = await d3.json("https://aircarto.fr/API_V2/capteurs/metadata?capteurType=ModuleAir");
var moduleairs = await d3.json("https://aircarto.fr/API_V2/capteurs/metadata?capteurType=NebuleAir");
console.log(moduleairs);

var no_location,cuisine,salle_a_manger,salon,chambre_parents,chambre_enfants,toilettes,salle_de_bain,entree;

no_location = moduleairs.filter(e => e.room == null);
cuisine = moduleairs.filter(e => e.cuisine == "cuisine");
salle_a_manger = moduleairs.filter(e => e.room == "salle_a_manger");
salon = moduleairs.filter(e => e.room == "salon");
chambre_parents = moduleairs.filter(e => e.room == "chambre_parents");
chambre_enfants = moduleairs.filter(e => e.room == "chambre_enfants");
toilettes = moduleairs.filter(e => e.room == "toilettes");
salle_de_bain = moduleairs.filter(e => e.room == "salle_de_bain");
entree = moduleairs.filter(e => e.room == "entree");





        // Declare the chart dimensions and margins.
        const width = 900;
        const height = 647;
        const marginTop = 0;
        const marginRight = 0;
        const marginBottom = 20;
        const marginLeft = 30;
        
        // Declare the x (horizontal position) scale.
        const x = d3.scaleUtc()
            .domain([0, 900])
            .range([marginLeft, width - marginRight]);
        
        // Declare the y (vertical position) scale.
        const y = d3.scaleLinear()
            .domain([0, 647])
            .range([height - marginBottom, marginTop]);
        
        // Create the SVG container.
        const svg = d3.create("svg")
            .attr("width", width)
            .attr("height", height);
        
        // Add the x-axis.
        svg.append("g")
            .attr("transform", `translate(0,${height - marginBottom})`)
            .call(d3.axisBottom(x));
        
        // Add the y-axis.
        svg.append("g")
            .attr("transform", `translate(${marginLeft},0)`)
            .call(d3.axisLeft(y));


svg.append('rect')
  .attr('x', 15)
  .attr('y', 15)
  .attr('width', 155)
  .attr('height', 220)
  .attr('stroke', 'red')
  .attr('fill', 'transparent');

svg.append('rect')
  .attr('x', 285)
  .attr('y', 235)
  .attr('width', 350)
  .attr('height', 385)
  .attr('stroke', 'red')
  .attr('fill', 'transparent');
        
        // Append the SVG element.
        container.append(svg.node());



//         var xCenter = [100, 300, 500];

// var simulation = d3.forceSimulation(nodes)
//   .force('charge', d3.forceManyBody().strength(5))
//   .force('x', d3.forceX().x(function(d) {
//     return xCenter[d.category];
//   }))
//   .force('collision', d3.forceCollide().radius(function(d) {
//     return d.radius;
//   }));
        

// 

    </script>
</body>
</html>